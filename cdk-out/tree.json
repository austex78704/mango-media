{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.201.0"},"children":{"InfrastructureStack":{"id":"InfrastructureStack","path":"InfrastructureStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.201.0"},"children":{"MangoMediaWebsiteBucket":{"id":"MangoMediaWebsiteBucket","path":"InfrastructureStack/MangoMediaWebsiteBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InfrastructureStack/MangoMediaWebsiteBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketName":{"Fn::Join":["",["mangomedia-website-",{"Ref":"AWS::AccountId"}]]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}]}}},"Policy":{"id":"Policy","path":"InfrastructureStack/MangoMediaWebsiteBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InfrastructureStack/MangoMediaWebsiteBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"MangoMediaWebsiteBucket6E020833"},"policyDocument":{"Statement":[{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["MangoMediaWebsiteBucket6E020833","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["MangoMediaWebsiteBucket6E020833","Arn"]},"/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["OriginAccessIdentityDF1E3CAC","S3CanonicalUserId"]}},"Resource":[{"Fn::GetAtt":["MangoMediaWebsiteBucket6E020833","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["MangoMediaWebsiteBucket6E020833","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["OriginAccessIdentityDF1E3CAC","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["MangoMediaWebsiteBucket6E020833","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"InfrastructureStack/MangoMediaWebsiteBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.201.0","metadata":[]},"children":{"Default":{"id":"Default","path":"InfrastructureStack/MangoMediaWebsiteBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}}}},"LatestNodeRuntimeMap":{"id":"LatestNodeRuntimeMap","path":"InfrastructureStack/LatestNodeRuntimeMap","constructInfo":{"fqn":"aws-cdk-lib.CfnMapping","version":"2.201.0"}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"InfrastructureStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.201.0"},"children":{"Staging":{"id":"Staging","path":"InfrastructureStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"Role":{"id":"Role","path":"InfrastructureStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}},"Handler":{"id":"Handler","path":"InfrastructureStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"OriginAccessIdentity":{"id":"OriginAccessIdentity","path":"InfrastructureStack/OriginAccessIdentity","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InfrastructureStack/OriginAccessIdentity/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"OAI for mangomedia.com"}}}}}},"Zone":{"id":"Zone","path":"InfrastructureStack/Zone","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.HostedZone","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InfrastructureStack/Zone/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnHostedZone","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::HostedZone","aws:cdk:cloudformation:props":{"hostedZoneConfig":{"comment":"Hosted zone for mangomedia.com"},"name":"mangomedia.com."}}}}},"SiteCertificate":{"id":"SiteCertificate","path":"InfrastructureStack/SiteCertificate","constructInfo":{"fqn":"aws-cdk-lib.aws_certificatemanager.Certificate","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InfrastructureStack/SiteCertificate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_certificatemanager.CfnCertificate","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CertificateManager::Certificate","aws:cdk:cloudformation:props":{"domainName":"mangomedia.com","domainValidationOptions":[{"domainName":"mangomedia.com","hostedZoneId":{"Ref":"ZoneA5DE4B68"}},{"domainName":"www.mangomedia.com","hostedZoneId":{"Ref":"ZoneA5DE4B68"}}],"subjectAlternativeNames":["www.mangomedia.com"],"tags":[{"key":"Name","value":"InfrastructureStack/SiteCertificate"}],"validationMethod":"DNS"}}}}},"SiteDistribution":{"id":"SiteDistribution","path":"InfrastructureStack/SiteDistribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.201.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"InfrastructureStack/SiteDistribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Resource":{"id":"Resource","path":"InfrastructureStack/SiteDistribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["MangoMediaWebsiteBucket6E020833","RegionalDomainName"]},"id":"InfrastructureStackSiteDistributionOrigin1167AEC68","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"OriginAccessIdentityDF1E3CAC"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"InfrastructureStackSiteDistributionOrigin1167AEC68","allowedMethods":["GET","HEAD","OPTIONS"],"cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"originRequestPolicyId":"88a5eaf4-2fd4-4709-b370-b4c650ea3fcf","viewerProtocolPolicy":"redirect-to-https"},"aliases":["mangomedia.com","www.mangomedia.com"],"customErrorResponses":[{"errorCachingMinTtl":1800,"errorCode":403,"responseCode":200,"responsePagePath":"/index.html"},{"errorCachingMinTtl":1800,"errorCode":404,"responseCode":200,"responsePagePath":"/index.html"}],"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true,"viewerCertificate":{"acmCertificateArn":{"Ref":"SiteCertificate38C247F6"},"minimumProtocolVersion":"TLSv1.2_2021","sslSupportMethod":"sni-only"}}}}}}},"SiteAliasRecord":{"id":"SiteAliasRecord","path":"InfrastructureStack/SiteAliasRecord","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.ARecord","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InfrastructureStack/SiteAliasRecord/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"aliasTarget":{"hostedZoneId":{"Fn::FindInMap":["AWSCloudFrontPartitionHostedZoneIdMap",{"Ref":"AWS::Partition"},"zoneId"]},"dnsName":{"Fn::GetAtt":["SiteDistribution3FF9535D","DomainName"]}},"hostedZoneId":{"Ref":"ZoneA5DE4B68"},"name":"mangomedia.com.","type":"A"}}}}},"AWSCloudFrontPartitionHostedZoneIdMap":{"id":"AWSCloudFrontPartitionHostedZoneIdMap","path":"InfrastructureStack/AWSCloudFrontPartitionHostedZoneIdMap","constructInfo":{"fqn":"aws-cdk-lib.CfnMapping","version":"2.201.0"}},"SiteWWWAliasRecord":{"id":"SiteWWWAliasRecord","path":"InfrastructureStack/SiteWWWAliasRecord","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.ARecord","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InfrastructureStack/SiteWWWAliasRecord/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"aliasTarget":{"hostedZoneId":{"Fn::FindInMap":["AWSCloudFrontPartitionHostedZoneIdMap",{"Ref":"AWS::Partition"},"zoneId"]},"dnsName":{"Fn::GetAtt":["SiteDistribution3FF9535D","DomainName"]}},"hostedZoneId":{"Ref":"ZoneA5DE4B68"},"name":"www.mangomedia.com.","type":"A"}}}}},"BucketName":{"id":"BucketName","path":"InfrastructureStack/BucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"DistributionId":{"id":"DistributionId","path":"InfrastructureStack/DistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"DistributionDomainName":{"id":"DistributionDomainName","path":"InfrastructureStack/DistributionDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"WebsiteURL":{"id":"WebsiteURL","path":"InfrastructureStack/WebsiteURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"InfrastructureStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"InfrastructureStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}},"Condition":{"id":"Condition","path":"InfrastructureStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.201.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"InfrastructureStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"InfrastructureStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.201.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}